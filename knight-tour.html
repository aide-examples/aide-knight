<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knight's Tour - 5x6</title>
    <style>
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    max-width: 900px;
    margin: 40px auto;
    padding: 20px;
    background: #f8fafc;
}
h1 {
    color: #1e293b;
    margin-bottom: 10px;
}
.metadata {
    color: #64748b;
    margin-bottom: 20px;
}
.metadata span {
    margin-right: 20px;
}
#board {
    display: block;
    margin: 20px 0;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
    padding: 10px;
}
.controls {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-top: 20px;
    flex-wrap: wrap;
}
.controls button {
    padding: 8px 16px;
    font-size: 14px;
    border: none;
    border-radius: 6px;
    background: #3b82f6;
    color: white;
    cursor: pointer;
    transition: background 0.2s;
}
.controls button:hover {
    background: #2563eb;
}
.controls button:disabled {
    background: #94a3b8;
    cursor: not-allowed;
}
.controls label {
    color: #475569;
}
.controls input[type="range"] {
    width: 100px;
}
#move-display {
    font-size: 16px;
    color: #1e293b;
    font-weight: 500;
    min-width: 120px;
}
.view-options {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #e2e8f0;
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}
.view-options label {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #475569;
    cursor: pointer;
    user-select: none;
}
.view-options input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
}
</style>
</head>
<body>
    <h1>Knight's Tour Solution</h1>
    <div class="metadata">
        <span>Board: 5x6</span>
        <span>Mode: Centrifugal (prefer edges)</span>
        <span>Move order: canonical</span>
        <span>Examinations: 2,433,728</span>
        <span>Time: 0.8459s</span>
    </div>
    <svg id="board" width="280" height="350"
     xmlns="http://www.w3.org/2000/svg">
    <!-- Grid with colors -->
    <g id="grid-colored">
    <rect x="30" y="0" width="50" height="50" fill="#f0d9b5" />
    <rect x="80" y="0" width="50" height="50" fill="#c59873" />
    <rect x="130" y="0" width="50" height="50" fill="#f0d9b5" />
    <rect x="180" y="0" width="50" height="50" fill="#c59873" />
    <rect x="230" y="0" width="50" height="50" fill="#f0d9b5" />
    <rect x="30" y="50" width="50" height="50" fill="#c59873" />
    <rect x="80" y="50" width="50" height="50" fill="#f0d9b5" />
    <rect x="130" y="50" width="50" height="50" fill="#c59873" />
    <rect x="180" y="50" width="50" height="50" fill="#f0d9b5" />
    <rect x="230" y="50" width="50" height="50" fill="#c59873" />
    <rect x="30" y="100" width="50" height="50" fill="#f0d9b5" />
    <rect x="80" y="100" width="50" height="50" fill="#c59873" />
    <rect x="130" y="100" width="50" height="50" fill="#f0d9b5" />
    <rect x="180" y="100" width="50" height="50" fill="#c59873" />
    <rect x="230" y="100" width="50" height="50" fill="#f0d9b5" />
    <rect x="30" y="150" width="50" height="50" fill="#c59873" />
    <rect x="80" y="150" width="50" height="50" fill="#f0d9b5" />
    <rect x="130" y="150" width="50" height="50" fill="#c59873" />
    <rect x="180" y="150" width="50" height="50" fill="#f0d9b5" />
    <rect x="230" y="150" width="50" height="50" fill="#c59873" />
    <rect x="30" y="200" width="50" height="50" fill="#f0d9b5" />
    <rect x="80" y="200" width="50" height="50" fill="#c59873" />
    <rect x="130" y="200" width="50" height="50" fill="#f0d9b5" />
    <rect x="180" y="200" width="50" height="50" fill="#c59873" />
    <rect x="230" y="200" width="50" height="50" fill="#f0d9b5" />
    <rect x="30" y="250" width="50" height="50" fill="#c59873" />
    <rect x="80" y="250" width="50" height="50" fill="#f0d9b5" />
    <rect x="130" y="250" width="50" height="50" fill="#c59873" />
    <rect x="180" y="250" width="50" height="50" fill="#f0d9b5" />
    <rect x="230" y="250" width="50" height="50" fill="#c59873" />
    </g>

    <!-- Grid without colors (hidden by default) -->
    <g id="grid-plain" style="display:none;">
    <rect x="30" y="0" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="80" y="0" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="130" y="0" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="180" y="0" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="230" y="0" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="30" y="50" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="80" y="50" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="130" y="50" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="180" y="50" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="230" y="50" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="30" y="100" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="80" y="100" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="130" y="100" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="180" y="100" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="230" y="100" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="30" y="150" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="80" y="150" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="130" y="150" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="180" y="150" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="230" y="150" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="30" y="200" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="80" y="200" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="130" y="200" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="180" y="200" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="230" y="200" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="30" y="250" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="80" y="250" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="130" y="250" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="180" y="250" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    <rect x="230" y="250" width="50" height="50" fill="white" stroke="#ccc" stroke-width="1" />
    </g>

    <!-- Coordinates -->
    <text x="55.0" y="320" text-anchor="middle" font-size="12" fill="#333">0</text>
    <text x="105.0" y="320" text-anchor="middle" font-size="12" fill="#333">1</text>
    <text x="155.0" y="320" text-anchor="middle" font-size="12" fill="#333">2</text>
    <text x="205.0" y="320" text-anchor="middle" font-size="12" fill="#333">3</text>
    <text x="255.0" y="320" text-anchor="middle" font-size="12" fill="#333">4</text>
    <text x="10" y="29.0" text-anchor="middle" font-size="12" fill="#333">0</text>
    <text x="10" y="79.0" text-anchor="middle" font-size="12" fill="#333">1</text>
    <text x="10" y="129.0" text-anchor="middle" font-size="12" fill="#333">2</text>
    <text x="10" y="179.0" text-anchor="middle" font-size="12" fill="#333">3</text>
    <text x="10" y="229.0" text-anchor="middle" font-size="12" fill="#333">4</text>
    <text x="10" y="279.0" text-anchor="middle" font-size="12" fill="#333">5</text>

    <!-- Path (drawn by JavaScript) -->
    <g id="path-lines"></g>

    <!-- Closing line for closed tour (hidden until complete) -->
    <line id="closing-line" style="display:none;"
          stroke="#ef4444" stroke-width="4" stroke-linecap="round"
          stroke-dasharray="8,4" />

    <!-- Knight marker -->
    <circle id="knight" cx="0" cy="0" r="12" fill="#7c3aed"
            stroke="#4c1d95" stroke-width="2" style="display:none;" />

    <!-- Move numbers (shown progressively) -->
    <g id="move-numbers"></g>
</svg>
    
    <div class="controls">
        <button id="reset" onclick="reset()">Reset</button>
        <button id="stepBack" onclick="stepBack()">◀ Step</button>
        <button id="playPause" onclick="togglePlayPause()">Play</button>
        <button id="stepForward" onclick="stepForward()">Step ▶</button>
        <label>Speed: <input type="range" id="speed" min="1" max="100" value="50"></label>
        <span id="move-display">Move: 0 / 0</span>
        <div class="view-options">
            <label><input type="checkbox" id="showColors" checked onchange="toggleColors()"> Square colors</label>
            <label><input type="checkbox" id="showNumbers" checked onchange="toggleNumbers()"> Move numbers</label>
        </div>
    </div>
    <script>

const path = [[2, 1], [0, 0], [1, 2], [0, 4], [2, 5], [4, 4], [2, 3], [3, 5], [4, 3], [3, 1], [1, 0], [0, 2], [1, 4], [3, 3], [4, 5], [2, 4], [0, 5], [1, 3], [0, 1], [2, 0], [4, 1], [2, 2], [3, 0], [4, 2], [3, 4], [1, 5], [0, 3], [1, 1], [3, 2], [4, 0]];
const cellSize = 50;
const margin = 30;
const total = path.length;
const isClosed = true;

let currentMove = 0;
let isPlaying = false;
let animationTimer = null;
let showNumbers = true;
let showColors = true;

function getCellCenter(x, y) {
    return [
        margin + x * cellSize + cellSize / 2,
        y * cellSize + cellSize / 2
    ];
}

function interpolateColor(ratio) {
    const r = Math.floor(0x22 + (0xef - 0x22) * ratio);
    const g = Math.floor(0xc5 - (0xc5 - 0x44) * ratio);
    const b = Math.floor(0x5e - (0x5e - 0x44) * ratio);
    return `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}`;
}

function updateDisplay() {
    document.getElementById('move-display').textContent = `Move: ${currentMove} / ${total - 1}`;
    document.getElementById('stepBack').disabled = currentMove === 0;
    document.getElementById('stepForward').disabled = currentMove >= total - 1;
}

function updateClosingLine() {
    const closingLine = document.getElementById('closing-line');
    if (!isClosed || currentMove < total - 1) {
        closingLine.style.display = 'none';
        return;
    }
    // Show closing line when tour is complete
    const [x1, y1] = getCellCenter(path[total-1][0], path[total-1][1]);
    const [x2, y2] = getCellCenter(path[0][0], path[0][1]);
    closingLine.setAttribute('x1', x1);
    closingLine.setAttribute('y1', y1);
    closingLine.setAttribute('x2', x2);
    closingLine.setAttribute('y2', y2);
    closingLine.style.display = 'block';
}

function drawUpToMove(moveNum) {
    const pathGroup = document.getElementById('path-lines');
    const numbersGroup = document.getElementById('move-numbers');
    const knight = document.getElementById('knight');

    // Clear existing
    pathGroup.innerHTML = '';
    numbersGroup.innerHTML = '';

    // Draw path lines up to current move
    for (let i = 0; i < moveNum; i++) {
        const [x1, y1] = getCellCenter(path[i][0], path[i][1]);
        const [x2, y2] = getCellCenter(path[i+1][0], path[i+1][1]);
        const ratio = i / (total - 1);
        const color = interpolateColor(ratio);

        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', x1);
        line.setAttribute('y1', y1);
        line.setAttribute('x2', x2);
        line.setAttribute('y2', y2);
        line.setAttribute('stroke', color);
        line.setAttribute('stroke-width', '3');
        line.setAttribute('stroke-linecap', 'round');
        pathGroup.appendChild(line);
    }

    // Draw move numbers up to current (if enabled)
    if (showNumbers) {
        const fontSize = cellSize / 3;
        for (let i = 0; i <= moveNum; i++) {
            const [cx, cy] = getCellCenter(path[i][0], path[i][1]);
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', cx);
            text.setAttribute('y', cy + fontSize / 3);
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('font-size', fontSize);
            text.setAttribute('font-weight', 'bold');
            text.setAttribute('fill', '#1e293b');
            text.textContent = i;
            numbersGroup.appendChild(text);
        }
    }

    // Position knight
    const [kx, ky] = getCellCenter(path[moveNum][0], path[moveNum][1]);
    knight.setAttribute('cx', kx);
    knight.setAttribute('cy', ky);
    knight.style.display = 'block';

    // Update closing line
    updateClosingLine();
}

function toggleNumbers() {
    showNumbers = document.getElementById('showNumbers').checked;
    drawUpToMove(currentMove);
}

function toggleColors() {
    showColors = document.getElementById('showColors').checked;
    document.getElementById('grid-colored').style.display = showColors ? 'block' : 'none';
    document.getElementById('grid-plain').style.display = showColors ? 'none' : 'block';
}

function stepForward() {
    if (currentMove < total - 1) {
        currentMove++;
        drawUpToMove(currentMove);
        updateDisplay();
    }
    if (currentMove >= total - 1) {
        pause();
    }
}

function stepBack() {
    if (currentMove > 0) {
        currentMove--;
        drawUpToMove(currentMove);
        updateDisplay();
    }
}

function reset() {
    pause();
    currentMove = 0;
    drawUpToMove(currentMove);
    updateDisplay();
}

function getSpeed() {
    return 1000 - document.getElementById('speed').value * 9;
}

function play() {
    if (currentMove >= total - 1) {
        currentMove = 0;
    }
    isPlaying = true;
    document.getElementById('playPause').textContent = 'Pause';
    tick();
}

function pause() {
    isPlaying = false;
    document.getElementById('playPause').textContent = 'Play';
    if (animationTimer) {
        clearTimeout(animationTimer);
        animationTimer = null;
    }
}

function togglePlayPause() {
    if (isPlaying) {
        pause();
    } else {
        play();
    }
}

function tick() {
    if (!isPlaying) return;
    stepForward();
    if (currentMove < total - 1) {
        animationTimer = setTimeout(tick, getSpeed());
    }
}

// Initialize
drawUpToMove(0);
updateDisplay();

</script>
</body>
</html>